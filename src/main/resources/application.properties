spring.application.name=balance-accounting-system

spring.jpa.hibernate.ddl-auto=update
spring.datasource.url=jdbc:mysql://mysql:3306/balance_db
spring.datasource.username=root
spring.datasource.password=denis123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
# ActiveMQ Configuration
spring.activemq.broker-url=tcp://activemq:61616
spring.activemq.user=admin
spring.activemq.password=admin
spring.activemq.packages.trust-all=true

# JMS Configuration
spring.jms.pub-sub-domain=false

# Actuator
management.endpoints.web.exposure.include=health,metrics,prometheus,info,env,beans
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true

# Metrics
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=${spring.application.name}
management.metrics.use-global-registry=true

# HTTP metrics
management.metrics.enable.http.server.requests=true
management.metrics.enable.jvm.threads.states=true
management.metrics.enable.jvm.memory.used=true
management.metrics.enable.jvm.gc.pause=true
management.metrics.enable.logback.events=true
management.metrics.enable.process.uptime=true
management.metrics.enable.system.cpu.usage=true

# JVM metrics
management.metrics.enable.jvm.buffer.memory.used=true
management.metrics.enable.jvm.memory.committed=true
management.metrics.enable.jvm.memory.max=true
management.metrics.enable.jvm.threads.live=true
management.metrics.enable.jvm.threads.daemon=true
management.metrics.enable.jvm.threads.peak=true

# Custom metrics
management.metrics.enable.hikaricp.connections=true
management.metrics.enable.hikaricp.connections.acquire=true
management.metrics.enable.hikaricp.connections.usage=true

# Logging
logging.level.ru.denis.balance_accounting_system=INFO
logging.level.org.springframework.jms=WARN
logging.level.org.apache.activemq=WARN

# Prometheus specific
management.prometheus.metrics.export.enabled=true
management.prometheus.metrics.export.step=1m

# Web metrics
server.tomcat.mbeanregistry.enabled=true

# HikariCP
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# JMS
spring.jms.listener.session.acknowledge-mode=client
spring.jms.listener.max-concurrency=5

spring.jpa.properties.jakarta.persistence.lock.timeout=5000
spring.jpa.persistence.lock.timeout=5000
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

keycloak.url=http://keycloak:8080
keycloakLocal.url=http://localhost:8081
spring.security.oauth2.resourceserver.jwt.issuer-uri=${keycloak.url}/realms/balance-realm
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${keycloak.url}/realms/balance-realm/protocol/openid-connect/certs